services:
  iris:
    image: intersystemsdc/iris-community:latest
    platform: linux/arm64
    ports:
      - "5435:5432"
    environment:
      - DB_TYPE=iris
      - DB_DEFAULT_SCHEMA=${DB_DEFAULT_SCHEMA:-SQLUser}
      - DB_METADATA_SCHEMA=${DB_METADATA_SCHEMA:-drizzle}
    healthcheck:
      test: ["CMD", "bash", "-lc", "cat < /dev/null > /dev/tcp/localhost/5432"]
      interval: 5s
      timeout: 5s
      retries: 20
