---
title: 路由器块 YAML 模式
description: 路由器块的 YAML 配置参考
---

## 模式定义

```yaml
type: object
required:
  - type
  - name
  - inputs
properties:
  type:
    type: string
    enum: [router]
    description: Block type identifier
  name:
    type: string
    description: Display name for this router block
  inputs:
    type: object
    required:
      - prompt
      - model
      - apiKey
    properties:
      prompt:
        type: string
        description: Instructions for routing decisions and criteria
      model:
        type: string
        description: AI model identifier (e.g., gpt-4o, gemini-2.5-pro, deepseek-chat)
      apiKey:
        type: string
        description: API key for the model provider (use {{ENV_VAR}} format)
      temperature:
        type: number
        minimum: 0
        maximum: 2
        description: Model temperature for routing decisions
        default: 0.3
      azureEndpoint:
        type: string
        description: Azure OpenAI endpoint URL (required for Azure models)
      azureApiVersion:
        type: string
        description: Azure API version (required for Azure models)
  connections:
    type: object
    description: Multiple connection paths for different routing outcomes
    properties:
      success:
        type: array
        items:
          type: string
        description: Array of target block IDs for routing destinations
```

## 连接配置

路由器块使用一个包含所有可能路由目标的成功数组：

```yaml
connections:
  success:
    - <string>                          # Target block ID option 1
    - <string>                          # Target block ID option 2
    - <string>                          # Target block ID option 3
    # Additional target block IDs as needed
```

## 示例

### 内容类型路由器

```yaml
content-router:
  type: router
  name: "Content Type Router"
  inputs:
    prompt: |
      Route this content based on its type:
      - If it's a question, route to question-handler
      - If it's a complaint, route to complaint-handler  
      - If it's feedback, route to feedback-handler
      - If it's a request, route to request-handler
      
      Content: <start.input>
    model: gpt-4o
    apiKey: '{{OPENAI_API_KEY}}'
  connections:
    success:
      - question-handler
      - complaint-handler
      - feedback-handler
      - request-handler
```

### 优先级路由器

```yaml
priority-router:
  type: router
  name: "Priority Router" 
  inputs:
    prompt: |
      Analyze the urgency and route accordingly:
      - urgent-queue: High priority, needs immediate attention
      - standard-queue: Normal priority, standard processing
      - low-queue: Low priority, can be delayed
      
      Email content: <email-analyzer.content>
      
      Route based on urgency indicators, deadlines, and tone.
    model: gpt-4o
    temperature: 0.2
    apiKey: '{{OPENAI_API_KEY}}'
  connections:
    success:
      - urgent-queue
      - standard-queue  
      - low-queue
```

### 部门路由器

```yaml
department-router:
  type: router
  name: "Department Router"
  inputs:
    prompt: |
      Route this customer inquiry to the appropriate department:
      
      - sales-team: Sales questions, pricing, demos
      - support-team: Technical issues, bug reports, how-to questions
      - billing-team: Payment issues, subscription changes, invoices
      - general-team: General inquiries, feedback, other topics
      
      Customer message: <start.input>
      Customer type: <customer-analyzer.type>
    model: claude-3-5-sonnet-20241022
    apiKey: '{{ANTHROPIC_API_KEY}}'
  connections:
    success:
      - sales-team
      - support-team
      - billing-team
      - general-team
```

## 高级配置

### 多模型路由器

```yaml
model-selector-router:
  type: router
  name: "Model Selection Router"
  inputs:
    prompt: |
      Based on the task complexity, route to the appropriate model:
      - simple-gpt35: Simple questions, basic tasks
      - advanced-gpt4: Complex analysis, detailed reasoning
      - specialized-claude: Creative writing, nuanced analysis
      
      Task: <start.task>
      Complexity indicators: <analyzer.complexity>
    model: gpt-4o-mini
    temperature: 0.1
    apiKey: '{{OPENAI_API_KEY}}'
  connections:
    success:
      - simple-gpt35
      - advanced-gpt4
      - specialized-claude
```

## 输出参考

路由器块不会直接生成输出，而是控制工作流路径：

```yaml
# Router decisions affect which subsequent blocks execute
# Access the routed block's outputs normally:
final-step:
  inputs:
    routed-result: <routed-block-name.content>
```

## 最佳实践

- 在提示中提供明确的路由标准
- 使用具体且描述性的目标块名称
- 为每个路由路径包含内容示例
- 使用较低的温度值以确保路由一致性
- 使用多样化的输入类型进行测试以确保路由准确性
- 为边缘情况考虑备用路径