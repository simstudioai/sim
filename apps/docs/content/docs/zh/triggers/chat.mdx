---
title: 聊天触发器
description: 从聊天部署中启动工作流
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Image } from '@/components/ui/image'

## 概述

聊天触发器为您的工作流创建了一个对话界面。将您的工作流部署为聊天，用户可以通过一个可分享的 URL 与其交互。每条消息都会使用您最新的部署启动一个新的工作流执行。

## 运行时输出

<div className='flex justify-center my-6'>
  <Image
    src='/static/triggers/chat-trigger-light.png'
    alt='聊天部署对话'
    width={400}
    height={250}
    className='rounded-xl border border-border shadow-sm'
  />
</div>

触发器会写入三个字段，供下游模块引用：

| 参考 | 描述 | 类型 |
|-----------|-------------|------|
| `<chat.input>` | 最新用户消息 | string |
| `<chat.conversationId>` | 会话线程 ID | string |
| `<chat.files>` | 可选上传文件 | 文件数组 |

### 文件属性

使用数组索引访问单个文件属性：

| 属性 | 描述 | 类型 |
|----------|-------------|------|
| `<chat.files[0].url>` | 签名下载 URL | string |
| `<chat.files[0].name>` | 原始文件名 | string |
| `<chat.files[0].size>` | 文件大小（字节） | number |
| `<chat.files[0].type>` | MIME 类型 | string |
| `<chat.files[0].uploadedAt>` | 上传时间戳（ISO 8601） | string |
| `<chat.files[0].expiresAt>` | URL 过期时间戳（ISO 8601） | string |

## 使用说明

1. 为每个工作流添加一个聊天触发器块。
2. 在聊天模式下部署工作流。
3. 分享部署链接——每次回复都会重用会话 ID，以便工作流可以保持上下文。

<Callout type="info">
构建器会阻止在同一工作流中使用多个聊天触发器块。
</Callout>
