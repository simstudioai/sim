---
title: 環境変数
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Image } from '@/components/ui/image'

環境変数は、APIキーやワークフローがアクセスする必要のあるその他の機密データなど、ワークフロー全体で設定値や機密情報を安全に管理する方法を提供します。これにより、実行中にそれらを利用可能にしながら、ワークフロー定義から機密情報を切り離すことができます。

## 変数タイプ

Simの環境変数は2つのレベルで機能します：

- **個人環境変数**：あなたのアカウントに限定され、あなただけが閲覧・使用できます
- **ワークスペース環境変数**：ワークスペース全体で共有され、すべてのチームメンバーが利用できます

<Callout type="info">
名前の競合がある場合、ワークスペース環境変数は個人環境変数よりも優先されます。
</Callout>

## 環境変数の設定

設定に移動して環境変数を構成します：

<Image
  src="/static/environment/environment-1.png"
  alt="新しい変数を作成するための環境変数モーダル"
  width={500}
  height={350}
/>

ワークスペース設定から、個人レベルとワークスペースレベルの両方の環境変数を作成・管理できます。個人変数はあなたのアカウントに限定されますが、ワークスペース変数はすべてのチームメンバーと共有されます。

### 変数をワークスペーススコープにする

ワークスペーススコープトグルを使用して、変数をチーム全体で利用可能にします：

<Image
  src="/static/environment/environment-2.png"
  alt="環境変数のワークスペーススコープを切り替えるトグル"
  width={500}
  height={350}
/>

ワークスペーススコープを有効にすると、その変数はすべてのワークスペースメンバーが利用でき、そのワークスペース内のあらゆるワークフローで使用できるようになります。

### ワークスペース変数ビュー

ワークスペーススコープの変数を作成すると、環境変数リストに表示されます：

<Image
  src="/static/environment/environment-3.png"
  alt="環境変数リスト内のワークスペーススコープ変数"
  width={500}
  height={350}
/>

## ワークフローでの変数の使用

ワークフローで環境変数を参照するには、`{{}}`表記を使用します。任意の入力フィールドで`{{`と入力すると、個人用とワークスペースレベルの両方の環境変数を表示するドロップダウンが表示されます。使用したい変数を選択するだけです。

<Image
  src="/static/environment/environment-4.png"
  alt="二重括弧表記を使用した環境変数の使用方法"
  width={500}
  height={350}
/>

## 変数の優先順位

同じ名前の個人変数とワークスペース変数がある場合：

1. **ワークスペース変数が**個人変数よりも**優先されます**
2. これにより名前の競合を防ぎ、チームワークフロー全体で一貫した動作を確保します
3. ワークスペース変数が存在する場合、同じ名前の個人変数は無視されます

<Callout type="warning">
意図しない上書きを避けるために、変数名は慎重に選んでください。個人変数にはイニシャルを、ワークスペース変数にはプロジェクト名を接頭辞として付けることを検討してください。
</Callout>

## セキュリティのベストプラクティス

### 機密データについて
- APIキー、トークン、パスワードはハードコーディングせず、環境変数として保存してください
- 複数のチームメンバーが必要とする共有リソースにはワークスペース変数を使用してください
- 個人の認証情報は個人変数に保管してください

### 変数の命名
- 説明的な名前を使用する：`DATABASE_URL`ではなく`DB`
- チーム全体で一貫した命名規則に従う
- 競合を避けるために接頭辞を検討する：`PROD_API_KEY`、`DEV_API_KEY`

### アクセス制御
- ワークスペース環境変数はワークスペースの権限を尊重します
- 書き込みアクセス権以上を持つユーザーのみがワークスペース変数を作成/変更できます
- 個人変数は常に個々のユーザーにプライベートです