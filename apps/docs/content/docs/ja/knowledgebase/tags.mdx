---
title: タグとフィルタリング
---

import { Video } from '@/components/ui/video'

タグは、ドキュメントを整理し、ベクトル検索に正確なフィルタリングを作成するための強力な方法を提供します。タグベースのフィルタリングとセマンティック検索を組み合わせることで、ナレッジベースから必要なコンテンツを正確に取得できます。

## ドキュメントへのタグの追加

ナレッジベース内の任意のドキュメントにカスタムタグを追加して、コンテンツを整理・分類し、より簡単に取得できるようにすることができます。

<div className="mx-auto w-full overflow-hidden rounded-lg">
  <Video src="knowledgebase-tag.mp4" width={700} height={450} />
</div>

### タグ管理
- **カスタムタグ**: ワークフローに合わせた独自のタグシステムを作成
- **ドキュメントごとの複数タグ**: 各ドキュメントに必要な数のタグを適用可能、ナレッジベースごとに7つのタグスロットが利用可能で、そのナレッジベース内のすべてのドキュメントで共有されます
- **タグの整理**: 一貫したタグ付けで関連ドキュメントをグループ化

### タグのベストプラクティス
- **一貫した命名**: ドキュメント全体で標準化されたタグ名を使用
- **説明的なタグ**: 明確で意味のあるタグ名を使用
- **定期的なクリーンアップ**: 未使用または古いタグを定期的に削除

## ナレッジブロックでのタグの使用

タグは、ワークフローのナレッジブロックと組み合わせると強力になります。特定のタグ付きコンテンツに検索をフィルタリングすることで、AIエージェントが最も関連性の高い情報を取得できるようになります。

<div className="mx-auto w-full overflow-hidden rounded-lg">
  <Video src="knowledgebase-tag2.mp4" width={700} height={450} />
</div>

## 検索モード

ナレッジブロックは、提供する内容に応じて3つの異なる検索モードをサポートしています：

### 1. タグのみの検索
**タグのみを提供する場合**（検索クエリなし）：
- **直接取得**: 指定されたタグを持つすべてのドキュメントを取得
- **ベクトル検索なし**: 結果は純粋にタグマッチングに基づく
- **高速パフォーマンス**: セマンティック処理なしの迅速な取得
- **完全一致**: 指定されたすべてのタグを持つドキュメントのみが返される

**ユースケース**: 特定のカテゴリやプロジェクトからすべてのドキュメントが必要な場合

### 2. ベクトル検索のみ
**検索クエリのみを提供する**場合（タグなし）：
- **意味検索**: 意味とコンテキストに基づいてコンテンツを検索
- **完全なナレッジベース**: すべてのドキュメントを横断して検索
- **関連性ランキング**: 意味的類似性によって結果を順序付け
- **自然言語**: 質問やフレーズを使用して関連コンテンツを検索

**ユースケース**: 組織に関係なく最も関連性の高いコンテンツが必要な場合

### 3. タグフィルタリングとベクトル検索の組み合わせ
**タグと検索クエリの両方を提供する**場合：
1. **最初に**: 指定されたタグを持つドキュメントのみにフィルタリング
2. **次に**: そのフィルタリングされたサブセット内でベクトル検索を実行
3. **結果**: タグ付けされたドキュメントからのみ意味的に関連するコンテンツ

**ユースケース**: 特定のカテゴリやプロジェクトから関連コンテンツが必要な場合

### 検索設定

#### タグフィルタリング
- **複数タグ**: OR論理のために複数のタグを使用（ドキュメントは1つ以上のタグを持つ必要がある）
- **タグの組み合わせ**: 正確なフィルタリングのために異なるタグタイプを組み合わせる
- **大文字小文字の区別**: タグマッチングは大文字小文字を区別しない
- **部分一致**: 正確なタグ名の一致が必要

#### ベクトル検索パラメータ
- **クエリの複雑さ**: 自然言語の質問が最も効果的
- **結果の制限**: 取得するチャンクの数を設定
- **関連性のしきい値**: 最小類似性スコアを設定
- **コンテキストウィンドウ**: ユースケースに合わせてチャンクサイズを調整

## ワークフローとの統合

### ナレッジブロックの設定
1. **ナレッジベースを選択**: 検索するナレッジベースを選択
2. **タグを追加**: フィルタリングタグを指定（オプション）
3. **クエリを入力**: 検索クエリを追加（オプション）
4. **結果を設定**: 取得するチャンクの数を設定
5. **検索をテスト**: ワークフローで使用する前に結果をプレビュー

### 動的タグの使用法
- **変数タグ**: ワークフロー変数をタグ値として使用
- **条件付きフィルタリング**: ワークフローのロジックに基づいて異なるタグを適用
- **コンテキスト認識検索**: 会話のコンテキストに基づいてタグを調整
- **複数ステップのフィルタリング**: ワークフローのステップを通じて検索を絞り込み

### パフォーマンスの最適化
- **効率的なフィルタリング**: タグフィルタリングはベクトル検索の前に行われ、パフォーマンスが向上
- **キャッシング**: 頻繁に使用されるタグの組み合わせは速度向上のためにキャッシュされる
- **並列処理**: 複数のタグ検索を同時に実行可能
- **リソース管理**: 検索リソースの自動最適化

## タグの使用を始める

1. **タグ構造を計画する**: 一貫した命名規則を決める
2. **タグ付けを開始**: 既存のドキュメントに関連タグを追加する
3. **組み合わせをテスト**: タグと検索クエリの組み合わせを試す
4. **ワークフローに統合**: タグ付け戦略とともにナレッジブロックを使用する
5. **時間をかけて改良**: 検索結果に基づいてタグ付けアプローチを調整する

タグは、ナレッジベースを単なるドキュメント保存場所から、AIワークフローが精密に操作できる、正確に整理された検索可能なインテリジェンスシステムへと変換します。