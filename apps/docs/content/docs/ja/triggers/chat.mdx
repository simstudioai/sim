---
title: チャットトリガー
description: チャットデプロイメントからワークフローを開始する
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Image } from '@/components/ui/image'

## 概要

チャットトリガーはワークフロー用の会話インターフェースを作成します。ワークフローをチャットとしてデプロイすると、ユーザーは共有可能なURLを通じてそれと対話できます。各メッセージは最新のデプロイメントを使用して新しいワークフロー実行を開始します。

## ランタイム出力

<div className='flex justify-center my-6'>
  <Image
    src='/static/triggers/chat-trigger-light.png'
    alt='チャットデプロイメントの会話'
    width={400}
    height={250}
    className='rounded-xl border border-border shadow-sm'
  />
</div>

このトリガーは、下流のブロックが参照できる3つのフィールドを書き込みます：

| リファレンス | 説明 | 型 |
|-----------|-------------|------|
| `<chat.input>` | 最新のユーザーメッセージ | string |
| `<chat.conversationId>` | 会話スレッドID | string |
| `<chat.files>` | オプションのアップロードファイル | files配列 |

### ファイルプロパティ

配列インデックスを使用して個々のファイルプロパティにアクセスします：

| プロパティ | 説明 | 型 |
|----------|-------------|------|
| `<chat.files[0].url>` | 署名付きダウンロードURL | string |
| `<chat.files[0].name>` | 元のファイル名 | string |
| `<chat.files[0].size>` | ファイルサイズ（バイト単位） | number |
| `<chat.files[0].type>` | MIMEタイプ | string |
| `<chat.files[0].uploadedAt>` | アップロードタイムスタンプ（ISO 8601形式） | string |
| `<chat.files[0].expiresAt>` | URL有効期限タイムスタンプ（ISO 8601形式） | string |

## 使用上の注意

1. ワークフローごとにチャットトリガーブロックを1つ追加します。
2. チャットモードでワークフローをデプロイします。
3. デプロイメントリンクを共有します—すべての返信は同じ会話IDを再利用するため、ワークフローはコンテキストを保持できます。

<Callout type="info">
ビルダーは同じワークフロー内の複数のチャットトリガーブロックをブロックします。
</Callout>
