---
title: ワークフローブロック
description: 現在のフロー内で別のワークフローを実行する
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Image } from '@/components/ui/image'

## 機能

<div className='flex justify-center my-6'>
  <Image
    src='/static/blocks/workflow.png'
    alt='ワークフローブロックの設定'
    width={400}
    height={280}
    className='rounded-xl border border-border shadow-sm'
  />
</div>

より大きなフローの一部として子ワークフローを呼び出したい場合は、ワークフローブロックをドロップします。このブロックは、そのワークフローの最新デプロイバージョンを実行し、完了するまで待機してから、親ワークフローを続行します。

## 設定方法

1. **ワークフローを選択** ドロップダウンから選びます（ループを防ぐため自己参照はブロックされています）。
2. **入力のマッピング**: 子ワークフローに入力フォームトリガーがある場合、各フィールドが表示され、親変数を接続できます。マッピングされた値が子ワークフローが受け取る内容になります。
3. **出力**: 子ワークフローが完了すると、ブロックは以下を公開します：
   - `result` – 子ワークフローの最終応答
   - `success` – エラーなく実行されたかどうか
   - `error` – 実行が失敗した場合のメッセージ

## 実行に関する注意点

- 子ワークフローは同じワークスペースコンテキストで実行されるため、環境変数とツールは引き継がれます。
- このブロックはデプロイメントバージョニングを使用します：API、スケジュール、Webhook、手動、またはチャット実行はデプロイされたスナップショットを呼び出します。子ワークフローを変更した場合は再デプロイしてください。
- 子ワークフローが失敗すると、下流で処理しない限り、ブロックはエラーを発生させます。

<Callout>
子ワークフローは焦点を絞ったものにしましょう。小さく再利用可能なフローにすることで、深いネストを作らずに組み合わせやすくなります。
</Callout>
