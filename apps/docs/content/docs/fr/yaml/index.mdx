---
title: Référence du flux de travail YAML
description: Guide complet pour écrire des flux de travail YAML dans Sim
---

import { Card, Cards } from "fumadocs-ui/components/card";
import { Step, Steps } from "fumadocs-ui/components/steps";
import { Tab, Tabs } from "fumadocs-ui/components/tabs";

Les flux de travail YAML offrent un moyen puissant de définir, versionner et partager des configurations de flux de travail dans Sim. Ce guide de référence couvre la syntaxe YAML complète, les schémas de blocs et les meilleures pratiques pour créer des flux de travail robustes.

## Démarrage rapide

Chaque flux de travail Sim suit cette structure de base :

```yaml
version: '1.0'
blocks:
  start:
    type: starter
    name: Start
    inputs:
      startWorkflow: manual
    connections:
      success: agent-1

  agent-1:
    type: agent
    name: "AI Assistant"
    inputs:
      systemPrompt: "You are a helpful assistant."
      userPrompt: 'Hi'
      model: gpt-4o
      apiKey: '{{OPENAI_API_KEY}}'
```

## Concepts fondamentaux

<Steps>
  <Step>
    <strong>Déclaration de version</strong> : Doit être exactement `version: '1.0'` (avec guillemets)
  </Step>
  <Step>
    <strong>Structure des blocs</strong> : Tous les blocs de flux de travail sont définis sous la clé `blocks`
  </Step>
  <Step>
    <strong>Références de bloc</strong> : Utilisez les noms de blocs en minuscules sans espaces (par ex., `<aiassistant.content>`)
  </Step>
  <Step>
    <strong>Variables d'environnement</strong> : Référencez avec des doubles accolades `{{VARIABLE_NAME}}`
  </Step>
</Steps>

## Types de blocs

Sim prend en charge plusieurs types de blocs principaux, chacun avec des schémas YAML spécifiques :

<Cards>
  <Card title="Bloc de démarrage" href="/yaml/blocks/starter">
    Point d'entrée du flux de travail avec prise en charge des déclencheurs manuels, webhooks et planifiés
  </Card>
  <Card title="Bloc d'agent" href="/yaml/blocks/agent">
    Traitement alimenté par l'IA avec prise en charge d'outils et de sorties structurées
  </Card>
  <Card title="Bloc de fonction" href="/yaml/blocks/function">
    Exécution de code JavaScript/TypeScript personnalisé
  </Card>
  <Card title="Bloc API" href="/yaml/blocks/api">
    Requêtes HTTP vers des services externes
  </Card>
  <Card title="Bloc de condition" href="/yaml/blocks/condition">
    Branchement conditionnel basé sur des expressions booléennes
  </Card>
  <Card title="Bloc de routeur" href="/yaml/blocks/router">
    Routage intelligent alimenté par l'IA vers plusieurs chemins
  </Card>
  <Card title="Bloc de boucle" href="/yaml/blocks/loop">
    Traitement itératif avec des boucles for et forEach
  </Card>
  <Card title="Bloc parallèle" href="/yaml/blocks/parallel">
    Exécution simultanée sur plusieurs instances
  </Card>
  <Card title="Bloc webhook" href="/yaml/blocks/webhook">
    Déclencheurs webhook pour les intégrations externes
  </Card>
  <Card title="Bloc d'évaluateur" href="/yaml/blocks/evaluator">
    Validation des sorties selon des critères et métriques définis
  </Card>
  <Card title="Bloc de flux de travail" href="/yaml/blocks/workflow">
    Exécution d'autres flux de travail comme composants réutilisables
  </Card>
  <Card title="Bloc de réponse" href="/yaml/blocks/response">
    Formatage de sortie finale du flux de travail
  </Card>
</Cards>

## Syntaxe de référence des blocs

L'aspect le plus critique des workflows YAML est de comprendre comment référencer les données entre les blocs :

### Règles de base

1. **Utilisez le nom du bloc** (pas l'ID du bloc) converti en minuscules avec les espaces supprimés
2. **Ajoutez la propriété appropriée** (.content pour les agents, .output pour les outils)
3. **Lors de l'utilisation du chat, référencez le bloc de départ** comme `<start.input>`

### Exemples

```yaml
# Block definitions
email-processor:
  type: agent
  name: "Email Agent"
  # ... configuration

data-formatter:
  type: function
  name: "Data Agent"
  # ... configuration

# Referencing their outputs
next-block:
  type: agent
  name: "Next Step"
  inputs:
    userPrompt: |
      Process this email: <emailagent.content>
      Use this formatted data: <dataagent.output>
      Original input: <start.input>
```

### Cas particuliers

- **Variables de boucle** : `<loop.index>`, `<loop.currentItem>`, `<loop.items>`
- **Variables parallèles** : `<parallel.index>`, `<parallel.currentItem>`

## Variables d'environnement

Utilisez des variables d'environnement pour les données sensibles comme les clés API :

```yaml
inputs:
  apiKey: '{{OPENAI_API_KEY}}'
  database: '{{DATABASE_URL}}'
  token: '{{SLACK_BOT_TOKEN}}'
```

## Bonnes pratiques

- **Gardez les noms de blocs lisibles** : « Email Processor » pour l'affichage dans l'interface
- **Référencez les variables d'environnement** : ne codez jamais en dur les clés API
- **Structurez pour la lisibilité** : regroupez logiquement les blocs liés
- **Testez progressivement** : construisez les workflows étape par étape

## Prochaines étapes

- [Syntaxe de référence des blocs](/yaml/block-reference) - Règles de référence détaillées
- [Schémas complets des blocs](/yaml/blocks) - Tous les types de blocs disponibles
- [Exemples de workflow](/yaml/examples) - Modèles de workflow réels